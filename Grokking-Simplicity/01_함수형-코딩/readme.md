# 1. 쏙쏙 들어오는 함수형 코딩에 오신 것을 환영합니다

#### 이번장에서 살펴볼 내용

- `함수형 사고`가 무엇인지 설명합니다
- 다른 함수형 프로그래밍 책과 어떻게 다른지 알 수 있습니다
- 함수형 프로그래머가 코드를 바라보는 특별한 방법을 알게 됩니다
- 여러분이 이 책을 계속 볼지 말지 감을 잡을 수 있습니다

## 함수형 프로그래밍은 무엇인가요?

- 함수형 프로그래밍(functional programming, FP)

  - 수학 함수를 사용하고 부수 효과를 피하는 것이 특징인 프로그래밍 패러다임
  - 부수 효과 없이 순수 함수만을 사용하는 프로그래밍 스타일

- 부수 효과

  - 함수가 리턴 값 이외에 하는 모든 일

- 순수 함수

  - 인자에만 의존하고 부수 효과가 없는 함수
  - = 수학 함수

- 정의에 따르면 함수형 프로그래머는 항상 부수 효과를 피하고 순수 함수만 사용해야 할 것 같지만, 실제 함수형프로그래머는 부수 효과와 순수하지 않은 함수를 사용합니다

## 실용적인 측면에서 함수형 프로그래밍 정의의 문제점

### 문제 1 : 부수 효과는 필요합니다

- 함수형 프로그래밍 정의에 따르면 부수 효과는 피해야 하지만, 부수 효과는 소프트웨어를 실행하는 이유입니다
- 필요할 때는 써야 합니다

### 문제 2 : 함수형 프로그래밍은 부수 효과를 잘 다룰 수 있습니다

### 문제 3 : 함수형 프로그래밍은 실용적입니다

- 함수형 프로그래밍으로 잘 만들어진 좋은 소프트웨어가 많이 있습니다

## 함수형 프로그래밍 정의가 혼란스러운 관리자

## 함수형 프로그래밍을 학문적 지식이 아닌 기술과 개념으로 보기

## "액션"과 "계산", "데이터" 구분하기

## 함수형 프로그래머는 부를 때 조심해야 하는 코드를 구분합니다

- 호출하는 횟수나 시점에 의존하는 코드 vs 언제 호출해도 항상 같은 값을 주는 코드

## 함수형 프로그래머는 실행하는 코드와 그렇지 않은 코드를 구분합니다

- 액션 : 부르는 시점에 의존
- 계산 : 입력값을 계산해 출력하는 것
- 데이터 : 이벤트에 대한 사실을 기록한 것

---

- 호출하는 횟수나 시점에 의존하는 코드

  - 액션

- 언제 호출해도 항상 같은 값을 주는 코드

  - 계산
    - 실행 가능
    - 실행하기 전까지 어떻게 동작할지 알 수 없음
  - 데이터
    - 정적인 코드

- 함수형 프로그래머는 코드를 액션과 계산, 데이터로 구분합니다
  - 함수형 프로그래머는 액션보다 계산을 좋아하고 계산보다 데이터를 좋아합니다

## 함수형 프로그래머는 액션과 계산, 데이터를 구분합니다

### 클라우드 서비스를 만든다고 가정해 봅시다

- 1단계 : 사용자가 `작업 완료 표시`를 함
  - 이것은 UI 이벤트인데 실행 횟수에 의존하기 때문에 `액션`입니다
- 2단계 : 클라이언트가 서버로 메시지를 보냄
  - `메시지를 보내는 것`도 `액션`입니다
  - `메시지 자체`는 나중에 서버에서 해석해야 하는 값이기 때문에 `데이터` 입니다
- 3단계 : 서버가 메시지를 받음
  - `메시지를 받는 것`은 횟수에 의존하므로 `액션`입니다
- 4단계 : 서버가 데이터베이스를 변경
  - `내부 상태를 바꾸는 것`은 `액션`입니다
- 5단계 : 서버가 누구에게 알림을 보낼지 결정
  - `결정`하는 것은 `계산`입니다
  - 입력값이 같다면 서버는 항상 같은 결정을 내리기 때문입니다
- 6단계 : 서버가 이메일로 알림을 보냄
  - `이메일 보내기`는 `액션`입니다
  - _같은 메일을 한 번 보내는 것과 두 번 보내는 것은 다릅니다_

## 함수형 프로그래밍에서는 코드를 세 가지로 분류합니다

### 1. 액션

#### 특징

- 실행 시점, 횟수에 의존

#### 전략

- 시간이 지남에 따라 안전하게 상태를 바꿀 수 있는 방법
- 순서를 보장하는 방법
- 액션이 정확히 한 번만 실행되게 보장하는 방법

### 2. 계산

#### 특징

- 입력값으로 출력값을 만드는 것
- 같은 입력값을 가지고 계산하면 항상 같은 결괏값이 나옵니다
- 계산은 테스트하기 쉽고 언제든지 몇 번을 불러도 안전합니다

#### 전략

- 정확성을 위한 정적 분석
- 소프트웨어에서 슬 수 있는 수학적 지식
- 테스트 전략

### 3. 데이터

#### 특징

- 이벤트에 대해 기록한 사실

#### 전략

- 효율적으로 접근하기 위해 데이터를 구성하는 방법
- 데이터를 보관하기 위한 기술
- 데이터를 이용해 중요한 것을 발견하는 원칙

## 액션, 계산, 데이터를 구분하면 어떤 장점이 있나요?

- 함수형 프로그래밍은 요즘 유행하는 분산 시스템에 잘 어울립니다
- 시간에 따라 바뀌는 값을 모델링할 때 동작 방법을 이해하는 것은 중요하지만 쉽지 않습니다

  - 실행 시점이나 횟수에 의존하는 코드를 없애면, 코드를 더 수비게 이해할 수 있고 심각한 버그를 막을 수 있습니다

- `데이터`와 `계산`은 실행 시점이나 횟수에 의존하지 않습니다

  - 그래서 `코드를 데이터와 계산으로 바꿀 수록` 시스템에서 생기는 여러가지 문제를 해결할 수 있습니다

- `액션`은 실행 시점과 횟수에 의존하기 때문에 여전히 문제가 되지만, 코드 전체에 영향을 주지 않도록 격리시키면 됩니다
- 액션을 안전하게 다룰 수 있는 기술이 있다
- 코드의 많은 부분을 액션에서 계산으로 옮기면 결과적으로 액션도 다루기 쉬워진다

## 다른 함수형 프로그래밍 책과 다른 점

- 이 책은 소프트웨어 엔지니어링 관점에서 `실용적`으로 썼습니다

- 실제 있을 법한 시나리오로 설명합니다

- 소프트웨어 설계를 중심으로 설명합니다

  - 짧은 코드 부터 완성된 애플리케이션 처럼 큰 코드까지 각 코드 규모에 따른 함수형 설계 원칙을 설명합니다

- 함수형 프로그래밍의 풍부함을 배울 수 있습니다

  - 그 어느 때보다 지금, 함수형 사고가 필요한 이유에 대해 자세히 알아봅니다

- 특정 함수형 프로그래밍 언어에 종속적이지 않습니다
  - 자바스크립트
    - 함수형 프로그래밍을 하기 좋은 언어는 아니지만 함수형 프로그래밍을 하기에 부족하기 때문에 함수형 프로그래밍을 가르치기 좋은 언어입니다

## 함수형 사고가 무엇인가요?

- 함수형 사고 : 함수형 프로그래머가 소프트웨어 문제를 해결하기 위해 사용하는 기술과 생각
- 함수형 프로그래밍에서 중요한 두 가지 개념
  - (1) 액션과 계산, 데이터를 구분해서 생각하는 것
  - (2) 일급 추상(first-class abstraction)

### 파트 1: 액션과 계산, 데이터

- 이러한 분류는 코드를 이해하고 테스트 및 재사용하는 것과 관련되어 있습니다
- 액션을 계산으로 리팩터링하는 방법
- 액션을 더 쉽게 다루는 방법
- 분류한 코드가 설계 관점에서 왜 유지보수와 테스트가 쉽고 재사용성이 좋은지에 대해 알아봅니다

### 파트 2: 일급 추상

- 함수에 함수를 넘겨 더 많은 함수를 재사용합니다
- 반응형 아키텍처(reactive architecture)와 어니언 아키텍처(onion architecture)를 일급 추상과 연결해서 설명합니다

## 이 책을 읽는 기본 규칙

- 함수형 프로그래밍 세계는 방대하기 때문에 모든 지식을 다 배우기는 힘듭니다
- 어떤 것을 먼저 배울지 선택해야 합니다

### 1. 특정 언어 긴으에 의존하지 않아야 합니다

- 함수형 프로그래밍 언어는 함수형 프로그래밍을 돕는 기능을 가지고 있습니다
- 함수형 언어는 강력한 타입 시스템을 가지고 있습니다

### 2. 실용적이라 바로 쓸 수 있어야 합니다

### 3. 여러분의 현재 가지고 있는 코드와 관계없이 쓸 수 있어야 합니다

- 처음부터 함수형으로 다시 만드는 것이 아니고 지금 있는 코드에도 적용할 수 있어야 합니다

## 결론

- 액션, 계산, 데이터를 구분하는 것부터 시작합니다
- 실용적인 함수형 프로그래밍을 배울 수 있습니다
- 언어와 상황에 관계없이 적용해 볼 수 있습니다

## 요점 정리

- 이 책은 두 파트로 되어 있습니다 각 파트는

  - 액션, 계산, 데이터를 구분하는 것과
  - 일급 추상을 사용하는 것을 다룹니다

- 일반적인 함수형 프로그래밍 정의는 학계 연구자들에게 도움이 되지만 아직까지는 소프트웨어 공학에 많은 도움이 되진 못했습니다

  - 그래서 함수형 프로그래밍이 추상적이고 실용적이지 않다는 느낌을 받았을 것입니다

- 함수형 사고는 함수형 프로그래밍의 기술과 개념을 말합니다
  - 함수형 사고는 이 책의 주제입니다
- 함수형 프로그래머는 코드를 액션과 계산, 데이터로 나눠서 바라봅니다
- 액션은 시간에 의존합니다
  - 그래서 사용하기 가장 어렵습니다
  - 액션에서 시간에 의존하는 부분을 분리하면 좀더 다루기 쉽습니다
- 계산은 시간에 의존적이지 않습니다
  - 다루기 쉽기 때문에 가능한 코드를 계산으로 바꾸는 것이 좋습니다
- 데이터는 정적이고 해석이 필요합니다
  - 데이터는 저장하거나 이해하기 쉽고 전송하기 편리합니다
- 이 책의 예제는 대부분 프로그래머가 익숙한 자바스크립트로 만들었습니다
  - 예제를 이해하기 위해 자바스크립트 기능에 대한 설명이 필요한 경우 설명하겠습니다

## 다음 장에서 배울 내용

- 함수형 사고를 실제 프로그램에 어떻게 쓰는지 알아봅니다
- 다음 장에서는 이 책의 기본이 되는 개념을 사용하여 문제를 해결하는 예를 살펴보겠습니다
