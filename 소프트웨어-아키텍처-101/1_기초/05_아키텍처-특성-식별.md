# 5. 아키텍처 특성 식별

- 아키텍처를 구축하거나 기존 아키텍처의 타당성을 검증할 때 `제일 먼저 해야할 일`은 `아키텍처 특성을 식별`하는 것입니다
- 주어진 문제 영역이나 아키텍처 특성('~성')을 정확하게 식별하기 위해 아키텍트는 해당 도메인을 잘 이해하고 있어야 하며,
  - 도메인 이해관계자들과 협력하여 도메인 관점에서 정말 중요한 것들을 결정해야 합니다
- 아키텍트는 적어도 `도메인 관심사`, `요구사항`, `암묵적 도메인 지식`, 이렇게 세 가지 출처에서 아키텍처 특성을 밝혀냅니다

## 5.1 도메인 관심사에서 아키텍처 특성 도출

- 아키텍트는 도메인 관심사를 올바르게 해석하여 정확한 아키텍처 특성을 식별해야 합니다

  - 예를 들어, 확장성, 내고장성, 보안, 성능 중 어느 것이 가장 중요한 관심사일까요?
    - 네 가지 모두 시스템에 필요한 특성이지만, 도메인의 핵심 목표와 현재 상황을 고려하여 도메인 관심사를 '~성'으로 해석한 후 그에 따라 정확하고 합리적인 아키텍처 결정을 내려야 합니다

- 도메인 이해관계자와 협력해서 주요 `아키텍처 특성을 정의하는 한 가지 팁`

  - 최종 목록을 가능한 짧게 하는 것

- 아키텍처에서 가장 흔한 안티패턴 중 하나가, 모든 아키텍처 특성을 지원하는 제네릭 아키텍처를 설계하려는 것입니다

  - 지원가능한 특성 하나하나가 전체 시스템 설계를 복잡하게 만드는 요인이기 때문에 너무 많은 아키텍처 특성을 수용하면 아키텍트, 개발자가 당초 의도했던 문제 영역의 해결을 시도하기도 전에 아키텍처가 너무 복잡해져버립니다
  - 아키텍처 특성의 개수에 연연하지 말고 가급적 설계를 단순화하는게 좋습니다

- 바보의 심부름의 장난 : 그룹에 새로 온 사람이 일반적으로 전문적인 맥락에서 그룹의 나이가 많거나 경험이 많은 구성원이 불가능하거나 무의미한 작업을 받는 일종의 장난입니다

  - 더 일반적으로 바보의 심부름은 거의 실패할 것 같은 일입니다

- 모든 아키텍처의 특성의 우선순위에 만장일치로 의견이 모아지는 경우는 거의 없습니다
- 따라서 최종 목록을 주고 각자 가장 중요한 특성 3개를 뽑으라고 하는 것이 좋은 방법입니다

  - 자연스러운 합의, 트레이드 오프 분석

## 5.2 요구사항에서 아키텍처 특성 도출

- 요구사항 정의서에 명시된 문장에서 도출한 아키텍처 특성도 있습니다

  - 예를 들어, `예상 유저수`와 그에 따른 `확장 문제`는 보통 도메인 관심사에 빠지지 않는 단골 손닙입니다
  - e.g. 수강 등록 시스템 -> 마감 10분 전 부터 1000명이 동시에 달려들어도 문제없는 시스템을 설계

- 아키텍처 카타
  - 아키텍처 특성을 도출하는 연습을 할 수 있도록 아키텍처 카타를 고안
  - 카타 : 일본 전통 무술에서 비롯된 용어, 올바른 자세와 기술을 중시하는 개인 훈련 체계

## 5.3 사례 연구: 실리콘 샌드위치

- 실리콘 샌드위치 카타를 예로 들어 아키텍트가 요구사항을 바탕으로 아키텍처 특성을 도출하는 방법을 알아보자

#### 설명

- 실리콘 샌드위치는 전국 가맹점을 보유한 샌드위치 브랜드로, (현재의 매장 서비스와 병행하여) 온라인 주문 시스템을 구축하려고 한다

#### 유저

- 앞으로 수천 명, 어쩌면 수백만 명에 달할 지도 모른다

#### 요구사항

- 유저가 주문을 하면 샌드위치를 픽업하러 갈 시간 및 상점까지 가는 경로를 전달받는다
  - 교통 정보가 포함된 여러 외부 지도 서비스와의 연계를 필수
- 배달 서비스가 가능한 지점은 기사를 보내 샌드위치를 유저에게 배달한다
- 모바일 기기에서도 이용 가능하다
- 전국 어느 지점이나 이용 가능한 프로모션/스페셜 행사를 제공한다
- 특정 지점에서만 이용 가능한 로컬 프로모션/스페셜 행사를 제공한다
- 온라인 결제, 대면 결제, 배송 시 결제 등 다양한 결제 옵션을 제공한다

#### 부가 콘텍스트

- 샌드위치 지점은 가맹점이므로 소유자가 다 다르다
- 모회사는 머지않아 해외 시장도 진출할 계획이다
- 이 회사는 값싼 인력을 고용해 이윤을 최대화하는 것이 목표다

#### 아키텍처 특성 도출

- 요구사항 하나하나가 여러 아키텍처 특성과 연관이 있을 수도 아닐 수도 있습니다
- 여기서 아키텍트의 임무는 엄청난 노력을 기울여 도메인 요구사항을 충족하는 전체 시스템을 코드 레벨로 설계하는 것이 아니라
  - 설계, 특히 `구조와 관련`이 있거나 영향을 미치는 `것들을 찾아내는 것`입니다
  - 우선, 아키텍처 특성이 될 만한 것들을 `명시적인 것`과 `암묵적인 것`으로 `분류`합니다

### 5.3.1 명시적 특성

- 요구사항 정의서에 기술됩니다
- 예를 덜어, 쇼핑몰 사이트는 지원해야 할 최대 동시 접속자 수를 특정하여 도메인 분석자가 요구사항으로 명시합니다
- 아키텍트는 요구사항의 각 항목이 어떤 아키텍처 특성과 관련되어 있는지 검토해야 하는데,
  - 그 전에 도메인 레벨에서의 기대치를 먼저 고려해야 합니다
- e.g.

  - 유저 수
    - 지금은 수천명
    - 향후 수백만명
    - 유의미한 성능 저하 없이 다수의 동시 유저를 처리하는 능력이 중요한 아키텍처 특성(확장성)
  - 탄력성
    - 폭증한 유저 요청을 처리

- 앱의 여러 기능들을 살펴보면서 책에 있는 예시처럼 아키텍처 특성을 도출해보자(1~9)

### 5.3.2 암묵적 특성

- 요구사항 정의서에 따로 없는 아키텍처 특성도 있지만 이들은 각각 중요한 설계 요소가 됩니다
- 가용성은 시스템에서 마땅히 지원되어야 할 암묵적인 아키텍처 특성으로,
  - 유저는 샌드위치 사이트에 접속할 수 있어야 합니다
- 유저가 사이트에 방문해서 시스템을 문제없이 사용하려면 신뢰성 역시 반드시 필요합니다
  - 물건을 구입하려고 사이트에 접속했는데 자꾸 접속이 끊기면 다시는 로그인하고 싶지 않겠죠
- 보안은 모든 시스템에 공통적인 암묵적 특성입니다

  - 안전하지 않은 소프트웨어를 원하는 사람은 아무도 없습니다

- 아키텍처 특성은 서로 연관되어 움직이므로 중요도에 따라 우선순위는 달라질 수 있습니다
  - 아키텍트는 보안이 설계의 구조적인 측면에 영향을 미치거나 `애플리케이션에 매우 중대한 요소라고 판단할 경우` 아키텍처 특성으로 간주합니다
- 아키텍트는 어느 한 아키텍처 특성을 지나치게 적용하는 함정에 빠지기가 쉬운데, 그 결과 시스템이 너무 복잡하게 설계되어 모자라게 적용하는 것만큼이나 해를 끼치는 경우가 많습니다

- 실리콘 샌드위치의 마지막 아키텍처 특성

  - 요구사항 곳곳에 해당되는 맞춤성
    - 레시피, 로컬 판매, 약도 등 문제 영ㅇ역의 여러 부분을 유저의 의도에 맞게 다시 정의
      - 커스터마이징이 원활하게 지원되는 아키텍처가 필요

- 아키텍처에서 최고의 설계는 없다, 오직 나쁜 것 중에서 제일 나은 트레이드오프들만 있을 뿐!
