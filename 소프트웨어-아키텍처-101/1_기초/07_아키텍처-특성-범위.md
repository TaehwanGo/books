# 7. 아키텍처 특성 범위

- 전통적으로 아키텍처 특성의 범위를 시스템 레벨에 두는 것을 당연시 했습니다
- 예를 들어, 아키텍트가 확장성을 논할 때에는 일반적으로 `전체 시스템의 확장성`을 가리키는 것입니다
  - 10년전까지 : 모놀리식
  - 현대 : 마이크로서비스 등의 아키텍처 스타일
- 어떤 아키텍처 스타일의 구조적인 진화 가능성을 측정할 기술이 필요
  - 6.1.2절 : 구조적 측면을 분석할 수 있는 코드 레벨의 메트릭
- 아키텍트는 운영 아키텍처 특성을 따져보고 아키텍처 특성에 영향을 미치는 코드베이스 외부의 컴포넌트를 잘 살펴봐야 합니다

## 7.1 커플링과 커네이선스

#### 커네이선스

- 두 컴포넌트 중 한쪽이 변경될 경우 다른 쪽도 변경해야 전체 시스템의 정합성이 맞는다면 이들은 커네이선스를 갖고 있는 것이다

## 7.2 아키텍처 퀀텀과 세분도

- 소프트웨어를 서로 엮는 것은 컴포넌트 레벨의 커플링만이 아닙니다
  - 많은 비즈니스 개념이 의미상 여러 시스템 파트를 한데 엮어 기능적으로 응집되어 있습니다
- 퀀텀은 상호작용을 하는 모든 물리 입자 가운데 가장 작은 양

#### 아키텍처 퀀텀

- `높은 기능 응집도`와 `동기적 커네이선스`를 가진 `독립적으로 배포 가능한 아티팩트`에 대해 알아보자

- 독립적으로 배포 가능

  - 아키텍처의 다른 파트와 독립적으로 작동되는 모든 필수 컴포넌트를 포함합니다
  - 예를 들어, 데이터베이스를 사용하는 애플리케이션은 데이터베이스 없이는 작동되지 않으므로 데이터베이스는 퀀텀의 일부입니다

- 높은 기능 응집도

  - 응집도는 컴포넌트 설계에 따라 구현된 코드가 얼마나 목적에 맞게 통합되어 있는지를 나타냅니다
  - 예를 들어,
    - Customer 컴포넌트는 고객 엔티니와 관련된 모든 프로퍼티와 메서드를 갖고 있으므로 응집도가 높지만
    - Utility 컴포넌트는 여러 가지 잡다한 메서드를 무작위로 섞어 높아서 응집도가 낮은 편입니다

- 동기적 커네이선스

  - 동기적 커네이선스는 아키텍처 퀀텀을 형성하는 애플리케이션 콘텍스트 내부 또는 분산 `서비스 간의 동기 호출`을 의미합니다
  - 예를 들어,
    - 마이크로서비스 아키텍처에서 어떤 서비스가 다른 서비스를 동기 호출할 때, 운영 아키텍처 특성 측면에서 두 서비스는 두드러진 차이를 나타낼 수 없습니다
      - 호출부가 피호출부보다 확장성이 훨씬 좋다면 타임아웃과 여타 신뢰성 문제가 일어날 것입니다
      - 따라서 동기 호출은 호출의 길이에 대해 동적 커네이선스를 만들어냅니다
      - 즉, 한쪽이 다른쪽을 기다린다면 호출하는 도중에는 양쪽의 운영 아키텍처 특성이 동일해야 합니다

- 그림 7-1. 퀀텀 커네이선스를 추가한 통합 다이어그램

### 7.2.1 사례 연구: GGG(Going, Going, Gone)

#### 설명

- 경매 회사 -> 온라인 경매 시장을 전국적으로 확장

#### 유저

- 경매 당 참여자는 수백명, 수천명까지 늘어날 수 있고 많은 동시 경매가 이루어질 것이다

#### 요구사항

- 경매는 가급적 실시간 처리가 가능해야 한다
- 입찰자는 낙찰 시 자동 결제할 신용카드를 등록해야한다
- 입찰자는 평판 지수로 추적되어야 한다
- 입찰자는 라이브 동영상 스트림을 시청하면서 발생하는 모든 입찰을 볼 수 있어야 한다
- 온라인/라이브 입찰 모두 입찰이 일어난 순서대로 접수되어야 한다

#### 부가 콘텍스트

- 이 경매 회사는 공격적으로 규모가 상대적으로 작은 경쟁사를 인수 합병하여 사세를 키우고 있다
- 예산 제한은 따로 없다. 전력적으로 그렇게 결정됐다
- 이 회사는 위조 혐의로 고발된 소송에서 이제 막 벗어났다

#### 아키텍처 특성 도출

- 5.3절과 마찬가지로, 아키텍트는 각 요구사항을 꼼꼼히
